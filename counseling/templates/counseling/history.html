<!-- main/templates/main/admin_dashboard.html -->
{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<script type="text/javascript">
    $(document).ready(function () {
        $("tr[data-url]").click(function () {
            var url = $(this).data("url");
            window.location.href = url;
        });
    });
</script>

<head>
    <link href="/static/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <script src="/static/js/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<style>
    form {
        height: 100%;
        cursor: default;
    }

    div {
        padding: 5px;
    }

    .dashboard {
        margin: 0;
        padding: 0;
        display: inline;
    }

    .dashboard>div>ul>li {
        display: inline;
    }

    ul {
        margin: 0;
        padding: 0;
    }

    ul>li {
        margin: 0;
        padding: 0;
    }

    table {
        width: 100%;
    }

    .styled-table {
        border-collapse: collapse;
        margin: 25px 0;
        font-size: 0.9em;
        font-family: sans-serif;
        min-width: 400px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
    }

    .styled-table thead tr {
        background-color: #009879;
        color: #ffffff;
        text-align: left;
    }

    .styled-table th,
    .styled-table td {
        padding: 12px 15px;
    }

    .styled-table tbody tr {
        border-bottom: 1px solid #dddddd;
    }

    .styled-table tbody tr:nth-of-type(even) {
        background-color: #f3f3f3;
    }

    .styled-table tbody tr:last-of-type {
        border-bottom: 2px solid #009879;
    }

    .styled-table tbody tr.active-row {
        font-weight: bold;
        color: #009879;
        cursor: pointer;
    }
</style>

<form action="{% url 'management:search' %}" method="POST">
    <div class="dashboard">
        <div>
            <h1> 상담 이력</h1>
        </div>
        <div>
            <ul>
                <li>
                    <input type="text" class="form-control" id="searchText" name="seachText" placeholder="검색창">
                </li>
                <li>
                    <input type="submit" class="btn btn-primary" value="검색">
                </li>
            </ul>
        </div>
        <div>
            <td colspan="4">총 {{ logs|length }}건</td>
        </div>
        <div>
            <table class="styled-table">
                <thead>
                    <th>id</th>
                    <th>body</th>
                    <th>create_time</th>
                    <th>user_id</th>
                </thead>
                <tbody>
                    {% if logs|length != 0 %}
                        {% for log in logs %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ log.body }}</td>
                            <td>{{ log.create_time }}</td>
                            <td>{{ log.user_id }}</td>
                        </tr>
                        {% endfor %}

                        {% else %}
                        <tr>
                            <td colspan="4">교육 이력이 없습니다.</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</form>
{% endblock %}
{% comment %} <tbody>
    {% for log in logs %}
    <tr>
        <td>{{ log.id }}</td>
        <td>{{ log.body }}</td>
        <td>{{ log.create_time }}</td>
        <td>{{ log.user_id }}</td>
    </tr>
    {% endfor %}
</tbody>
</table>
</div> {% endcomment %}

<!-- #검색로직
def search(request):
    query = request.POST.get('searchText', '')
   
    if query:
        results = User.objects.filter(name__icontains=query)
    else:
        results = []
    return render(request, 'education/edu_history.html', {'data': results, 'query': query}) -->